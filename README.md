# URL Scheduler Chrome拡張機能

## 概要
URL Schedulerは、指定した時刻に特定のURLを自動的に開くChrome拡張機能です。

## 機能
- ユーザーが時刻とURLを指定できる
- 指定した時刻になると、自動的に新しいタブでURLを開く

## ファイル構成
- `manifest.json`: 拡張機能の設定ファイル
- `background.js`: バックグラウンドで動作するスクリプト
- `popup.html`: 拡張機能のポップアップUI
- `popup.js`: ポップアップUIの動作を制御するスクリプト
- `icon48.png`と`icon128.png`: 拡張機能のアイコン画像

## 開発者向け説明

### manifest.json
マニフェストファイルは拡張機能の「設計図」のようなものです。以下に主要な項目の説明を記します：

- `manifest_version`: マニフェストのバージョンを指定します。現在は3を使用します。
- `name`: 拡張機能の名前です。
- `version`: 拡張機能のバージョン番号です。
- `description`: 拡張機能の簡単な説明です。
- `permissions`: 拡張機能が必要とする権限を列挙します。この拡張機能では `alarms`（時間指定の処理用）と `tabs`（新しいタブを開くため）を使用しています。
- `background`: バックグラウンドで動作するスクリプトを指定します。
- `action`: ブラウザのツールバーに表示されるアイコンの動作を定義します。ここでは、クリック時に表示するポップアップページを指定しています。
- `icons`: 拡張機能のアイコン画像を指定します。異なるサイズを用意することで、様々な場面で適切なサイズのアイコンが使用されます。

### background.js
バックグラウンドスクリプトで、拡張機能がアクティブでない時も動作し続けます。ここでは、アラームイベントを監視し、指定時刻になったらURLを開く処理を行います。

### popup.html と popup.js
これらのファイルは拡張機能のポップアップUIを定義し制御します。

#### ポップアップUIとは
ポップアップUIは、ブラウザのツールバーにある拡張機能のアイコンをクリックしたときに表示される小さなウィンドウです。URL Schedulerの場合、以下の要素が含まれます：

- タイトル（"URL Scheduler"）
- 時刻入力フィールド
- URL入力フィールド
- "スケジュール設定"ボタン
- ステータスメッセージを表示する領域

ポップアップUIは、ユーザーが拡張機能の主要機能に素早くアクセスするための効率的な方法を提供します。`popup.html`でUIの構造を定義し、`popup.js`でその動作を制御します。

### 補足説明
- 複数アラームの管理：Chrome Alarms APIは自動的に複数のアラームを管理します。各アラームは一意の名前（この場合、URLをプレフィックスとした名前）で識別されます。
- 重複登録の防止：popup.jsでアラームを作成する前に、同じURLのアラームが既に存在するかチェックする処理を追加する必要があります。
- アラーム永続性：Chrome Alarms APIはブラウザのセッションをまたいでアラームを保持します。これにより、ブラウザを閉じても設定したスケジュールは維持されます。
- アラーム確認機能：現在の実装では、登録済みのアラームを確認する機能は含まれていません。この機能を追加する場合は、`chrome.alarms.getAll()`メソッドを使用して実装できます。

## 拡張機能の読み込み方法
開発中の拡張機能をChromeにロードするには、以下の手順に従います：

1. Google Chromeを開き、アドレスバーに `chrome://extensions` と入力してEnterを押します。
2. 右上の「デベロッパーモード」スイッチをオンにします。
3. 「パッケージ化されていない拡張機能を読み込む」ボタンをクリックします。
4. 拡張機能のファイル（manifest.json を含むフォルダ）が保存されているディレクトリを選択します。
5. 「フォルダーの選択」（または類似のボタン）をクリックします。

これで拡張機能がChromeに読み込まれ、ツールバーに表示されます。開発中に変更を加えた場合は、拡張機能ページで「更新」ボタンをクリックするか、拡張機能を再度読み込む必要があります。

## 学習ポイント
1. マニフェストファイルの構造と役割
   - 拡張機能の基本情報の設定方法
   - 必要な権限の宣言

2. バックグラウンドスクリプトの使用方法
   - イベントリスナーの設定
   - Chrome APIの使用（alarms, tabs）

3. ポップアップUIの作成と制御
   - HTMLとCSSを使用したUIデザイン
   - JavaScriptによるUI操作とイベント処理

4. Chrome APIの活用
   - `chrome.alarms` APIを使用したスケジューリング
   - `chrome.tabs` APIを使用した新しいタブの操作

5. 非同期処理の理解
   - Chrome APIの多くが非同期で動作することの理解

この拡張機能を通じて、Chrome拡張機能の基本的な構造、ユーザーインターフェースの作成、バックグラウンド処理、そしてChrome APIの使用方法を学ぶことができます。これらの概念は、より複雑な拡張機能を開発する際の基礎となります。
